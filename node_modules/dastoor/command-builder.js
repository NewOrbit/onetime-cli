var Command = require('./command');

function CommandBuilder() {
    this.commandStore = {};
}

CommandBuilder.prototype._get = function (name) {
    return this.commandStore[name];
};

CommandBuilder.prototype._set = function (command) {

    this.commandStore[command.path] = command;

    if(command.parentPath) {
        var parent = this.command(command.parentPath);
        parent.commands.push(command);
    }

    return command;
};

CommandBuilder.prototype.command = function (path) {
    return this._get(path) ||
           this._set(new Command(path));
};

module.exports = CommandBuilder;
